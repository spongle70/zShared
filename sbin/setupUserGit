#!/bin/sh
#
echo "SCRIPT $0 starting"

clone_repo () {
    if [ ! -d ${DIR} ]
    then
        mkdir -p ${DIR}
    fi

    for i in ${REPO}
    do
        echo $i
        if [ ! -d ${DIR}/$i ]
        then
            echo $i
            cd ${DIR}
            git clone ${REPOSITE}/${i}.git
    #        GIT_SSH_COMMAND="ssh -o 'StrictHostKeyChecking no' -i ${KEYS}" git clone ${REPOSITE}/${i}.git
        fi
    done
}

MYNAME=`uname -n`

if [ -f /zz/zPrivate/secrets/.${MYNAME}.${USER}.private ]
then
    . /zz/zPrivate/secrets/.${MYNAME}.${USER}.private
else
    if [ -f /zz/zSyno/secrets/.${MYNAME}.${USER}.private ]
    then
        . /zz/zSyno/secrets/.${MYNAME}.${USER}.private
    else
        GITUSER=YYYY
        DOMAIN=DOMAIN
        PORT=PORT
        PRIVATE_KEYS=~/YYY/qwer.pub
        PRIVATE_REPO="x  y  x"
        PUBLIC_REPO="x y z"

        PRIVATE_SITE=ssh://git@${DOMAIN}:${PORT}/${GITUSER}
    fi
fi



if [ $USER != "root" ]
then
    ZZ=~/git
    if [ ! -d ${ZZ} ]
    then
        mkdir -p ${ZZ}/private
        mkdir -p ${ZZ}/public
    fi
else
    ZZ=/zz
fi


REPOSITE=${PRIVATE_SITE}
KEYS=${PRIVATE_KEYS}

REPO=${PRIVATE_REPO}
if [ $USER != "root" ]
then
    DIR=${ZZ}/private
else
    DIR=${ZZ}
fi
clone_repo

REPO=${PUBLIC_REPO}
if [ $USER != "root" ]
then
    DIR=${ZZ}/public
else
    DIR=${ZZ}
fi
clone_repo


exit 0
